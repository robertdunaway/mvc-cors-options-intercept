mashupApp.factory("coreRouteHelper",["$log","$q","$location","sessionService","utility",function(e,t,o,r,l){"use strict";var a=function(t){var a=l.getLogObject("Instr",t,"coreRouteHelper","logRoute","resolving route",r);a.absUrl=o.absUrl(),a.url=o.url(),e.log("UI-Routing to [ "+o.url()+" ]",a)},n=function(e){var o=t.defer();return function(){a(e),o.resolve(!0)}(),o.promise};return{logRoute:n}}]),mashupApp.config(["$routeProvider",function(e){e.otherwise({redirectTo:"/mashup"}),e.when("/mashup/about",{templateUrl:"apps/mashup/about.min.html",controller:"mashup.AboutController",controllerAs:"vm",resolve:{loadMyCtrl:["$ocLazyLoad",function(e){return e.load({name:"mashupApp",files:["apps/mashup/about.controller.min.js"]})}]}}).when("/mashup",{templateUrl:"apps/mashup/welcome.min.html",controller:"mashup.WelcomeController",controllerAs:"vm",resolve:{loadMyCtrl:["$ocLazyLoad",function(e){return e.load({name:"mashupApp",files:["apps/mashup/welcome.controller.min.js"]})}]}})}]),mashupApp.factory("mashupRouterAuth",["$log","$q","$timeout","$location","$interval","sessionService","cacheService","utility","coreRouteHelper",function(e,t,o,r,l,a,n,s,u){"use strict";var i=function(e){var o=t.defer();return function(){p().then(function(t){var l,a,n,i=t[0];_.isUndefined(i)||_.isNull(i)?(l=!1,a=!1):(n=_.first(_.where(i.sessions,{appName:"coreSession"})),l=c(n),a=m(n,e)),l?n.sessionLastUsed=s.localMilToUtcMil((new Date).getTime()):(r.path("/mashup/login"),a||o.reject()),u.logRoute("mashup"),o.resolve(!0)})}(),o.promise},p=function(){return n.getCache("mashupSessions")},c=function(e){if(_.isNull(e)||_.isUndefined(e))return!1;var t=(e.userName,e.isAuthenticated),o=(e.authDateTime,e.authTimeUTCMills),r=!0;t||(r=!1);var l=s.localMilToUtcMil((new Date).getTime()),a=60,n=o+6e4*a;return l>n&&(r=!1),r},m=function(e,t){var o=!1;return 0===t.length&&(o=!0),_.isNull(e)||_.isUndefined(e)?!1:(angular.isArray(t)&&angular.forEach(t,function(t,r){_.contains(e.roles,t)&&(o=!0)}),o)};return{resolveRoute:i}}]),mashupApp.config(["$routeProvider",function(e){"use strict";e.when("/quality/cqtsQualityExport",{templateUrl:"apps/quality/cqtsQualityExport/cqtsQualityExport.min.html",controller:"quality.CqtsQualityExportController",controllerAs:"vm",resolve:{loadMyCtrl:["$ocLazyLoad",function(e){return e.load({name:"mashupApp",files:["apps/quality/cqtsQualityExport/cqtsQualityExport.controller.js","apps/quality/~appServices/qualityDataService.min.js"]})}],logRoute:["$route","coreRouteHelper",function(e,t){return t.logRoute()}]}}).when("/quality/cqtsTransExport",{templateUrl:"apps/quality/cqtsTransExport/cqtsTransExport.min.html",controller:"quality.CqtsTransExportController",controllerAs:"vm",resolve:{loadMyCtrl:["$ocLazyLoad",function(e){return e.load({name:"mashupApp",files:["apps/quality/cqtsTransExport/cqtsTransExport.controller.min.js","apps/quality/~appServices/qualityDataService.min.js"]})}],logRoute:["$route","coreRouteHelper",function(e,t){return t.logRoute()}]}})}]);
//# sourceMappingURL=route.config.min.js.map